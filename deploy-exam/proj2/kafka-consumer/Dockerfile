FROM amazoncorretto:25

ARG JAR

COPY $JAR /opt/app.jar

ENV SPRING_KAFKA_BOOTSTRAPSERVERS=
ENV SPRING_KAFKA_SECURITY_PROTOCOL="SASL_SSL"
ENV SPRING_KAFKA_PROPERTIES_SASL_MECHANISM="AWS_MSK_IAM"
ENV SPRING_KAFKA_PROPERTIES_SASL_JAAS_CONFIG="software.amazon.msk.auth.iam.IAMLoginModule required;"
ENV SPRING_KAFKA_PROPERTIES_SASL_CLIENT_CALLBACK_HANDLER_CLASS="software.amazon.msk.auth.iam.IAMClientCallbackHandler"

ENTRYPOINT ["java", "-jar", "/opt/app.jar"]